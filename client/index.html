<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



<script>
    $(function () { $("head").load("cabecalho.html") });

    $(document).ready(function () {
        function exibirMensagem(titulo, texto, tipo) {
            // tipos -> warning, error, success

            var texto = texto.replace(/<p>/g, " ");
            var texto = texto.replace(/<\/p>/g, " ");
            Swal.fire({
                title: titulo,
                html: texto,
                icon: tipo,
                confirmButtonText: 'OK'
            })
        };





        $("#btnCadastrarEmail").on('click', function () {
            var json = new Object();
            json.email = "paulohenriqu@egmail.com";
            $.ajax({
                url: '../server/cadastrarEmail.php',
                type: "post",
                data: "data=" + JSON.stringify(json),
                dataType: 'json',
            }).done(function (resposta, status, response) {
                let titulo = response.responseJSON.title;
                let msg = response.responseJSON.message;

                if (response.status == 201) { //valido e cadastrado
                    exibirMensagem(titulo, msg, 'success');
                } 
                else if (response.status == 202) {//erro na hora de cadastrar
                    exibirMensagem(titulo, msg, 'error');
                }
                else if (response.status == 203) { //email n√£o e valido
                    exibirMensagem(titulo, msg, 'warning');
                }
                else{                
                    exibirMensagem('Erro fatal!', 'Um erro inesperado aconteceu!!, contate o admin','error');
                }
            }).fail(function (jqXHR, status, err) {
                exibirMensagem(jqXHR.responseJSON.title, jqXHR.responseJSON.message,'error');
            });
        });
    });
</script>

<body>
    <button id="btnCadastrarEmail">
        botao

    </button>

</body>